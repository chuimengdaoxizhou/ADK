# å·¥å…· Agent ç¤ºä¾‹ï¼ˆTool Agent Exampleï¼‰

## ä»€ä¹ˆæ˜¯å·¥å…· Agentï¼Ÿ

å·¥å…· Agent åœ¨åŸºç¡€çš„ ADKï¼ˆAgent Development Kitï¼‰Agent åŸºç¡€ä¸Šæ‰©å±•äº†â€œå·¥å…·â€çš„èƒ½åŠ›ï¼Œè®© Agent é™¤äº†ç”Ÿæˆæ–‡æœ¬å›å¤å¤–ï¼Œè¿˜èƒ½æ‰§è¡Œæ“ä½œï¼Œä¾‹å¦‚è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿã€æ£€ç´¢ä¿¡æ¯ã€æ‰§è¡Œç‰¹å®šåŠŸèƒ½ï¼Œä»è€Œæ›´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚

æœ¬ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•æ„å»ºä¸€ä¸ª Agentï¼Œä½¿å…¶èƒ½å¤Ÿä½¿ç”¨å†…ç½®å·¥å…·ï¼ˆå¦‚ Google æœç´¢ï¼‰å’Œè‡ªå®šä¹‰å‡½æ•°å·¥å…·æ¥å¢å¼ºåŠŸèƒ½ã€‚

---

## æ ¸å¿ƒç»„ä»¶

### 1. å†…ç½®å·¥å…·ï¼ˆBuilt-in Toolsï¼‰

ADK æä¾›äº†ä¸€äº›å¼€ç®±å³ç”¨çš„å†…ç½®å·¥å…·ï¼Œå¯ä¸ Agent é…åˆä½¿ç”¨ï¼š

* **Google æœç´¢**ï¼šè®©ä½ çš„ Agent èƒ½åœ¨äº’è”ç½‘ä¸Šæœç´¢ä¿¡æ¯
* **ä»£ç æ‰§è¡Œï¼ˆCode Executionï¼‰**ï¼šå…è®¸ä½ çš„ Agent æ‰§è¡Œä»£ç ç‰‡æ®µ
* **Vertex AI Search**ï¼šå…è®¸ä½ çš„ Agent åœ¨ä½ è‡ªå·±çš„æ•°æ®ä¸­è¿›è¡Œæœç´¢

ğŸ“Œ **æ³¨æ„ï¼šå½“å‰æ¯ä¸ªæ ¹ Agent æˆ–å•ä¸€ Agent åªèƒ½ä½¿ç”¨ä¸€ä¸ªå†…ç½®å·¥å…·**
è¯¦ç»†ä¿¡æ¯è§ï¼š[ADK æ–‡æ¡£ - å†…ç½®å·¥å…·](https://google.github.io/adk-docs/tools/built-in-tools/#use-built-in-tools-with-other-tools)

---

### 2. è‡ªå®šä¹‰å‡½æ•°å·¥å…·ï¼ˆCustom Function Toolsï¼‰

ä½ å¯ä»¥é€šè¿‡å®šä¹‰ Python å‡½æ•°æ¥è‡ªå®šä¹‰å·¥å…·ï¼Œè¿™äº›å·¥å…·å¯ä»¥æ‰©å±• Agent çš„èƒ½åŠ›æ¥å®Œæˆç‰¹å®šä»»åŠ¡ã€‚

#### è‡ªå®šä¹‰å‡½æ•°å·¥å…·æœ€ä½³å®è·µï¼š

* **å‚æ•°**ï¼šä½¿ç”¨æ ‡å‡†çš„ JSON å¯åºåˆ—åŒ–ç±»å‹ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•´æ•°ã€åˆ—è¡¨ã€å­—å…¸ï¼‰
* **ä¸æ”¯æŒé»˜è®¤å‚æ•°å€¼**
* **è¿”å›å€¼**ï¼šå»ºè®®è¿”å›ä¸€ä¸ªå­—å…¸æ ¼å¼

  * å¦‚æœä¸è¿”å›å­—å…¸ï¼ŒADK ä¼šè‡ªåŠ¨åŒ…è£…ä¸º `{"result": ...}`
  * æ¨èæ ¼å¼å¦‚ä¸‹ï¼š

    ```python
    {
        "status": "success",
        "error_message": None,
        "result": "..."
    }
    ```
* **å‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆdocstringï¼‰**ï¼šå°†ä½œä¸ºå·¥å…·è¯´æ˜ï¼Œä¾› LLM ä½¿ç”¨

  * æè¿°åº”æ¸…æ™°ï¼Œä»¥ä¾¿å¤§æ¨¡å‹èƒ½æ­£ç¡®ç†è§£å¦‚ä½•ä½¿ç”¨è¯¥å·¥å…·

---

## ä½¿ç”¨é™åˆ¶

åœ¨ ADK ä¸­ä½¿ç”¨å†…ç½®å·¥å…·æ—¶ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªé™åˆ¶ï¼š

### ğŸ”’ æ¯ä¸ª Agent åªèƒ½ä½¿ç”¨ä¸€ä¸ªå†…ç½®å·¥å…·

å¦‚ä¸‹ç”¨æ³•æ˜¯ä¸æ”¯æŒçš„ï¼ˆå³ä½¿ç”¨ä¸¤ä¸ªå†…ç½®å·¥å…·ï¼‰ï¼š

```python
root_agent = Agent(
    name="RootAgent",
    model="gemini-2.0-flash",
    description="Root Agent",
    tools=[built_in_code_execution, google_search],  # âŒ ä¸æ”¯æŒ
)
```

---

### ğŸ”’ ä¸èƒ½æ··ç”¨å†…ç½®å·¥å…·å’Œè‡ªå®šä¹‰å‡½æ•°å·¥å…·

ä»¥ä¸‹ä»£ç åŒæ ·æ˜¯ **ä¸æ”¯æŒçš„**ï¼š

```python
def get_current_time() -> dict:
    """è·å–å½“å‰æ—¶é—´ï¼Œæ ¼å¼ä¸º YYYY-MM-DD HH:MM:SS"""
    return {
        "current_time": datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
    }

root_agent = Agent(
    name="RootAgent",
    model="gemini-2.0-flash",
    description="Root Agent",
    tools=[google_search, get_current_time],  # âŒ ä¸æ”¯æŒ
)
```

ğŸ‘‰ å¦‚æœä½ æƒ³åŒæ—¶ä½¿ç”¨è¿™ä¸¤ç§å·¥å…·ï¼Œä½ éœ€è¦ä½¿ç”¨å¤š Agent æ¶æ„ä¸­çš„ **Agent Tool æœºåˆ¶**ã€‚

---

## ç¤ºä¾‹ä»£ç è¯´æ˜

åœ¨ `agent.py` ä¸­å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥ä½¿ç”¨ Google æœç´¢å·¥å…·çš„ Tool Agentã€‚è¯¥ Agent é…ç½®åŒ…æ‹¬ï¼š

1. Agent çš„åç§°ä¸æè¿°
2. ä½¿ç”¨çš„ Gemini æ¨¡å‹
3. æŒ‡å¯¼æ¨¡å‹è¡Œä¸ºçš„ instructionsï¼ˆæç¤ºè¯ï¼‰
4. å¯ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨ï¼ˆæ­¤å¤„æ˜¯ google\_searchï¼‰

æ–‡ä»¶ä¸­è¿˜åŒ…å«ä¸€ä¸ªæ³¨é‡Šæ‰çš„ `get_current_time()` ç¤ºä¾‹ï¼Œä½ å¯ä»¥å–æ¶ˆæ³¨é‡Šæ¥æµ‹è¯•è‡ªå®šä¹‰å·¥å…·åŠŸèƒ½ã€‚

---

## ä½¿ç”¨æ­¥éª¤

è¿™ä¸ªç¤ºä¾‹ä½¿ç”¨æ ¹ç›®å½•åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒã€‚è¯·ç¡®ä¿ä½ å·²ï¼š

### 1. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ

```bash
# macOS/Linux:
source ../.venv/bin/activate
# Windows CMD:
..\.venv\Scripts\activate.bat
# Windows PowerShell:
..\.venv\Scripts\Activate.ps1
```

### 2. è®¾ç½® API Key

* å°† `tool_agent` æ–‡ä»¶å¤¹ä¸‹çš„ `.env.example` é‡å‘½åä¸º `.env`
* åœ¨ `.env` ä¸­æ·»åŠ ä½ çš„ Google API å¯†é’¥ï¼Œå¡«å…¥ `GOOGLE_API_KEY` å˜é‡

---

## è¿è¡Œç¤ºä¾‹

1. è¿›å…¥åŒ…å« agent æ–‡ä»¶å¤¹çš„ `2-tool-agent` ç›®å½•ï¼š

```bash
cd 2-tool-agent
```

2. å¯åŠ¨äº¤äº’å¼ Web UIï¼š

```bash
adk web
```

3. æ‰“å¼€ç»ˆç«¯ä¸­æ˜¾ç¤ºçš„ URLï¼ˆé€šå¸¸æ˜¯ [http://localhost:8000ï¼‰](http://localhost:8000ï¼‰)

4. åœ¨é¡µé¢å·¦ä¸Šè§’çš„ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© `"tool_agent"`

5. å¼€å§‹ä¸ Agent èŠå¤©

---

## ADK å‘½ä»¤è¯´æ˜ï¼š

* `adk web`ï¼šå¯åŠ¨ Web èŠå¤©ç•Œé¢
* `adk run tool_agent`ï¼šç›´æ¥åœ¨ç»ˆç«¯è¿è¡Œ Agent
* `adk api_server`ï¼šå¯åŠ¨ FastAPI æ¥å£ï¼Œæ”¯æŒé€šè¿‡ API è°ƒç”¨ä½ çš„ Agent

---

## ç¤ºä¾‹æç¤ºè¯­ï¼ˆPromptï¼‰

ä½ å¯ä»¥å°è¯•è¾“å…¥ä»¥ä¸‹å†…å®¹æµ‹è¯•ï¼š

* â€œæœç´¢æœ‰å…³äººå·¥æ™ºèƒ½çš„æœ€æ–°æ–°é—»â€
* â€œæŸ¥æ‰¾å…³äº Google Agent Development Kit çš„ä¿¡æ¯â€
* â€œé‡å­è®¡ç®—é¢†åŸŸçš„æœ€æ–°è¿›å±•æœ‰å“ªäº›ï¼Ÿâ€

æŒ‰ `Ctrl+C` å¯åœæ­¢å¯¹è¯æˆ–å…³é—­æœåŠ¡å™¨ã€‚

---

## æ›´å¤šèµ„æº

* [å·¥å…·ç±»å‹æ€»è§ˆ](https://google.github.io/adk-docs/tools/#full-example-tavily-search)
* [è‡ªå®šä¹‰å‡½æ•°å·¥å…·æ–‡æ¡£](https://google.github.io/adk-docs/tools/function-tools/)
* [å†…ç½®å·¥å…·æ–‡æ¡£](https://google.github.io/adk-docs/tools/built-in-tools/)

---

